{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":"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","sourcesContent":["interface Topic {\n    name: string;\n    description: string;\n    resources: string[];\n}\n\ninterface Level {\n    name: string;\n    topics: Topic[];\n}\n\ninterface Contributor {\n    name: string;\n    contact: string;\n}\n\ninterface Props {\n    theme: Theme,\n    levels: Level[];\n    notes: string[];\n    contributors: Contributor[];\n}\n\ninterface Params {\n    [key: string]: string;\n}\n\ninterface Theme {\n    primaryColor: string;\n}\n\ninterface Technology {\n    id: string;\n    isVisible: boolean;\n    displayName: string;\n    description: string;\n}\n\ninterface TopicProgress {\n    [key: string]: boolean;\n}\n\ninterface Progress {\n    [key: string]: TopicProgress;\n}\n\nconst localStorageKey = \"__@@__user_progress\";\n\nasync function getProgress(): Promise<Progress> {\n    if (localStorage) {\n        const progressJson = localStorage.getItem(localStorageKey);\n        if (progressJson) {\n            const progress: Progress = JSON.parse(progressJson);\n            return Promise.resolve(progress);\n        } else {\n            const defaultValue = {};\n            const defaultValueJson = JSON.stringify(defaultValue);\n            localStorage.setItem(localStorageKey, defaultValueJson);\n            return Promise.resolve(defaultValue);\n        }\n    }\n    return Promise.reject();\n}\n\nasync function setProgress(technologyId: string, topic: string, completed: boolean) {\n    const progress = await getProgress();\n    if (progress) {\n        if (progress[technologyId] === undefined) {\n            progress[technologyId] = {\n                [topic]: completed\n            };\n        } else {\n            progress[technologyId][topic] = completed;\n        }\n        const progressJson = JSON.stringify(progress);\n        localStorage.setItem(localStorageKey, progressJson);\n        return Promise.resolve(progress);\n    }\n    return Promise.reject();\n}\n\nfunction getParams(): Params {\n    const search = window.location.search;\n    if (search) {\n        const paramsStr = search.split(\"?\")[1];\n        if (paramsStr) {\n            const rawParams = paramsStr.split(\"&\");\n            const params: Params = rawParams.reduce((prev, curr) => {\n                const raw = curr.split(\"=\");\n                return {\n                    ...prev,\n                    ...{\n                        [raw[0]]: raw[1]\n                    }\n                }\n            }, {});\n            return params;\n        }\n    }\n    return {};\n}\n\nfunction getTech(): string | undefined {\n    const params = getParams();\n    const tech = params[\"tech\"];\n    return tech;\n}\n\nfunction getUrl(tech?: string) {\n    if (tech !== undefined) {\n        return `./technologies/${tech}/${tech}.json?cache=${new Date().getTime()}`;\n    }\n    return `./technologies/technologies.json?cache=${new Date().getTime()}`;\n}\n\nasync function fetchTechnologies(): Promise<Technology[]> {\n    const url = getUrl();\n    const response = await fetch(url, {\n        method: \"GET\"\n    });\n    const data = await response.json();\n    return data;\n}\n\nasync function fetchData(tech: string): Promise<Props> {\n    const url = getUrl(tech);\n    const response = await fetch(url, {\n        method: \"GET\"\n    });\n    const data = await response.json();\n    return data;\n}\n\nasync function renderContent(props: Props, tech: Technology) {\n    const progress = await getProgress();\n    return `\n        <style>\n            h1 {\n                color: ${props.theme.primaryColor};\n            }\n\n            a {\n                color: ${props.theme.primaryColor};\n            }\n\n            .level {\n                background-color: ${props.theme.primaryColor};\n                color: #ffffff;\n            }\n        </style>\n        <img class=\"logo\" src=\"./technologies/${tech.id}/${tech.id}.png\" />\n        <h1>\n            ${tech.displayName} Progression Ladder\n        </h1>\n        <h4>\n            The ${tech.displayName} progression ladder is a grouping of concepts and skills relevant to ${tech.displayName} programming.\n            It provides aspiring ${tech.displayName} programmers with a way to track and improve their ${tech.displayName} skills.\n        </h4>\n        <table>\n            ${\n                props.levels.map(l => `\n                    <tr class=\"level\">\n                        <td colspan=\"4\">${l.name}</td>\n                    </tr>\n                    <tr class=\"level-subtitle\">\n                        <td>CONCEPTS</td>\n                        <td>SKILLS</td>\n                        <td>RESOURCES</td>\n                        <td>COMPLETED</td>\n                    </tr>\n                    ${\n                        l.topics.map((t, i) => `\n                            <tr class=\"topic ${i === l.topics.length -1 ? \"last\" : \"\"}\">\n                                <td>\n                                    ${t.name}\n                                </td>\n                                <td>\n                                    ${t.description}\n                                </td>\n                                <td>\n                                    ${\n                                        t.resources.map(r => `\n                                            <a\n                                                href=\"${r}\"\n                                                target=\"_blank\"\n                                                data-toggle=\"tooltip\"\n                                                data-placement=\"left\"\n                                                title=\"${r}\"\n                                            >\n                                                <i class=\"material-icons\">link</i>\n                                            </a>\n                                        `).join(\"\")\n                                    }\n                                </td>\n                                <td>\n                                    <input\n                                        class=\"completed_checkbox\"\n                                        type=\"checkbox\"\n                                        name=\"${tech.id}_${t.name}\"\n                                        data-lang=\"${tech.id}\"\n                                        data-topic=\"${t.name}\"\n                                        value=\"true\"\n                                        ${(() => {\n                                            if (progress[tech.id]) {\n                                                if (progress[tech.id][t.name]) {\n                                                    return `checked=\"checked`;\n                                                }\n                                            }\n                                        })()}\"\n                                    >\n                                </td>\n                            </tr>\n                        `).join(\"\")\n                    }\n                `).join(\"\")\n            }\n        <table>\n        ${\n            props.notes.map(n => `\n                <div class=\"note\">${n}</div>\n            `).join(\"\")\n        }\n        <div class=\"copyright\">\n            This guide was created by\n            ${props.contributors.map((contributor, index) => {\n                if (props.contributors.length === 1 || index === 0) {\n                    return `\n                        <a href=\"${contributor.contact}\">\n                            ${contributor.name}\n                        </a>\n                    `;\n                } else if (index > 0 && index < props.contributors.length -1) {\n                    return `, <a href=\"${contributor.contact}\">${contributor.name}</a>`;\n                } else {\n                    return `and <a href=\"${contributor.contact}\">${contributor.name}</a>`;\n                }\n            }).join(\"\")}\n            and it is licensed under\n            <a\n                href=\"https://creativecommons.org/licenses/by/4.0/\"\n                title=\"Creative Commons Attribution 4.0 International license\"\n            >Creative Commons Attribution 4.0 International<a>.\n        </div>\n    `;\n}\n\nfunction renderHome(technologies: Technology[]) {\n    technologies = technologies.sort((a, b) => a.displayName.localeCompare(b.displayName))\n                               .filter(t => t.isVisible);\n    return `\n        <style>\n            h1 {\n                color: #f7a80d;\n            }\n\n            a {\n                color: #f7a80d;\n            }\n\n            .level {\n                background-color: #f7a80d;\n                color: #ffffff;\n            }\n        </style>\n        <img class=\"logo\" src=\"./assets/logo.png\" />\n        <h1>Tech Ladder IO</h1>\n        <h4>\n            A community-driven grouping of concepts and skills relevant to different technologies\n            that provides aspiring programmers with a way to track and improve their skills.\n        </h4>\n        <table>\n            <tr class=\"level\">\n                <td>Technology</td>\n                <td>Description</td>\n                <td>Ladder</td>\n            </tr>\n            ${technologies.map(t => {\n                return `\n                    <tr class=\"topic\">\n                        <td>\n                            <a href=\"/?tech=${t.id}\">\n                                <b>\n                                    ${t.displayName}\n                                </b>\n                            </a>\n                        </td>\n                        <td>\n                            ${t.description}\n                        </td>\n                        <td>\n                            <a\n                                href=\"/?tech=${t.id}\"\n                                data-toggle=\"tooltip\"\n                                data-placement=\"left\"\n                                title=\"${t.displayName}\"\n                            >\n                                <i class=\"material-icons\">link</i>\n                            </a>\n                        </td>\n                    </tr>\n                `;\n            }).join(\"\")}\n        <table>\n        <div class=\"promo\">\n            <h1>We need your help!</h1>\n            <p>\n                This is a community-driven project, please share your feedback and\n                help us to improve it.<br>\n                Please open an issue or send us a PR on <a href=\"https://github.com/remojansen/TechLadderIO\">GitHub</a>!\n            </p>\n        </div>\n    `;\n}\n\nfunction renderError(e: string) {\n    return `${e}`;\n}\n\nfunction mount(selector: string, html: string, done?: Function) {\n    const $e = document.querySelector(selector);\n    if ($e) {\n        $e.innerHTML = html;\n        if (done) {\n            done();\n        }\n    }\n}\n\n(async () => {\n    const root = \"#main\";\n    try {\n        const techId = getTech();\n        const technologies = await fetchTechnologies();\n        let html = \"\";\n\n        if (techId === undefined) {\n            html = renderHome(technologies);\n        } else if (technologies.find(t => t.id === techId) === undefined) {\n            html = `\n                Sorry page not found!\n            `;\n        } else {\n            const data = await fetchData(techId!);\n            const tech = technologies.find(t => t.id === techId);\n            html = await renderContent(data, tech!);\n        }\n        \n        mount(root, html, () => {\n            $(\"a\").tooltip();\n            $(\".completed_checkbox\").on(\"change\", (e) => {\n                (async () => {\n                    const target = $(e.target);\n                    const data = $(e.target).data();\n                    const isChecked = target.is(\":checked\");\n                    await setProgress(data.lang, data.topic, isChecked);\n                })();\n            });\n        });\n\n    } catch(e) {\n        const html = renderError(e.message);\n        mount(root, html);\n    }\n})();\n"]}