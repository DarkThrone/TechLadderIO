{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":"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","sourcesContent":["interface Topic {\n    name: string;\n    description: string;\n    resources: string[];\n}\n\ninterface Level {\n    name: string;\n    topics: Topic[];\n}\n\ninterface Promo {\n    title: string;\n    p1: string;\n    p2: string;\n    p3: string;\n}\n\ninterface Copyright {\n    p1: string;\n    p2: string;\n}\n\ninterface Props {\n    title: string;\n    subtitle: string;\n    levels: Level[];\n    notes: string[];\n    promo: Promo;\n    copyright: Copyright;\n}\n\nfunction getUrl() {\n    const lang = getLang();\n    return `./data/data.${lang}.json`;\n}\n\nasync function fetchData(): Promise<Props> {\n    const url = getUrl();\n    const response = await fetch(url, {\n        method: \"GET\"\n    });\n    const data = await response.json();\n    return data;\n} \n\nfunction renderContent(props: Props) {\n    return `\n        <img class=\"logo\" src=\"./assets/ts.png\" />\n        <h1>${props.title}</h1>\n        <h4>${props.subtitle}</h4>\n        <table>\n            ${\n                props.levels.map(l => `\n                    <tr class=\"level\">\n                        <td colspan=\"3\">${l.name}</td>\n                    </tr>\n                    <tr class=\"level-subtitle\">\n                        <td>CONCEPTS</td>\n                        <td>SKILLS</td>\n                        <td>RESOURCES</td>\n                    </tr>\n                    ${\n                        l.topics.map((t, i) => `\n                            <tr class=\"topic ${i === l.topics.length -1 ? \"last\" : \"\"}\">\n                                <td>\n                                    ${t.name}\n                                </td>\n                                <td>\n                                    ${t.description}\n                                </td>\n                                <td>\n                                    ${\n                                        t.resources.map(r => `\n                                            <a\n                                                href=\"${r}\"\n                                                target=\"_blank\"\n                                                title=\"${r}\"\n                                            >\n                                                <i class=\"material-icons\">link</i>\n                                            </a>\n                                        `).join(\"\")\n                                    }\n                                </td>\n                            </tr>\n                        `).join(\"\")\n                    }\n                `).join(\"\")\n            }\n        <table>\n        ${\n            props.notes.map(n => `\n                <div class=\"note\">${n}</div>\n            `).join(\"\")\n        }\n        <div class=\"promo\">\n            <h1>${props.promo.title}</h1>\n            <p>\n                ${props.promo.p1} <b>Learning TypeScript 2.x (2nd edition)</b> ${props.promo.p2}\n            </p>\n            <a href=\"http://www.learningtypescript.com/\">\n                <img src=\"./assets/book.png\"/>\n            </a>\n            <p>\n                ${props.promo.p3} <a href=\"http://www.learningtypescript.com/\">www.learningtypescript.com</a>\n            </p>\n        </div>\n        <div class=\"copyright\">\n            Copyright &copy; 2018 <a href=\"https://twitter.com/RemoHJansen\">Remo H. Jansen</a>.\n            ${props.copyright.p1}\n            <a\n                href=\"https://github.com/remojansen/TSPL/blob/master/LICENSE\"\n            >MIT</a>.\n            <br/>\n            ${props.copyright.p2}\n            <a\n                href=\"https://creativecommons.org/licenses/by/4.0/\"\n                title=\"Creative Commons Attribution 4.0 International license\"\n            >Creative Commons Attribution 4.0 International<a>.\n        </div>\n    `;\n}\n\nfunction renderError(e: string) {\n    return `${e}`;\n}\n\nfunction mount(selector: string, html: string) {\n    const $e = document.querySelector(selector);\n    if ($e) {\n        $e.innerHTML = html;\n    }\n}\n\nfunction getLang() {\n    /*\n        At the moment we only support one language\n        but people can contribute more language by\n        submmiting new data files. Once a new file\n        is created we need to add an entry here. \n    */\n    const supportedLang = [ \"en\" ];\n    const defaultLang = supportedLang[0];\n    const raw = navigator.language.split(\"-\");\n    const lang = raw[0];\n    if (supportedLang.indexOf(lang) !== -1) {\n        return lang;\n    } else {\n        return defaultLang;\n    }\n}\n\n(async () => {\n    const root = \"#main\";\n    try {\n        const data = await fetchData();\n        const html = renderContent(data);\n        mount(root, html);\n    } catch(e) {\n        const html = renderError(e.message);\n        mount(root, html);\n    }\n})();\n"]}